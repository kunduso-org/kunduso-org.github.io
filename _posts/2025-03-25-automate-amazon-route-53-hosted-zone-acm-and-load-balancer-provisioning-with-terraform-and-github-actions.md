---
title: "Automate Amazon Route 53 hosted zone, ACM, and Load Balancer provisioning with Terraform and GitHub Actions"
date: 2025-03-25 09:15:00 +0000
categories: []
tags: []
---

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">AWS provides seamless integration to manage secure traffic routing through an <strong>Amazon Route 53</strong> hosted zone to an <strong>Application Load Balancer (ALB)</strong>, using a secure certificate from <strong>AWS Certificate Manager (ACM)</strong>. I build upon a previously discussed use case such that by the end of this note, you'll have the concept of creating an ALB that securely accepts traffic through HTTPS with a custom domain and Route 53 handling the DNS records using Terraform and GitHub Actions.</span></span></span>
<!--more-->

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Previously, I discussed three identical use cases. In the first use case, I showed how to attach a load balancer to three Amazon EC2 instances. In the second use case, I showed how to attach a load balancer to three Amazon EC2 instances created in the private subnet. Finally, in the third use case, I showed how to attach a load balancer to three Amazon EC2 instances that are part of an auto-scaling group created in a private subnet. In all the use cases, I could access the static web page hosted on the Amazon EC2 instances via the load balancer DNS using the HTTP protocol listening on port <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">#80</code>.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">In this note, <span style="text-decoration: underline">I'll extend the concept</span> and demonstrate how to use a <span style="text-decoration: underline">secure mechanism</span> (port <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">#443</code>) to access the static web page and use a <span style="text-decoration: underline">custom DNS</span> instead of the load balancer DNS. For that, I used two additional AWS cloud resources: <span style="text-decoration: underline">Amazon Route 53 and Amazon Certificate Manager</span>. Later, I also covered the AWS cloud resource provisioning mechanism via GitHub Actions.</span></span></span>

<strong><span style="font-size: 22px"><span style="font-family: calibri"><span style="color: #000000">Provision the AWS cloud resources</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">An <strong>Amazon Route 53</strong> hosted zone is a container for DNS records that define how traffic must be routed for a specific domain or subdomain. It acts as a central management point for all the <span style="text-decoration: underline">DNS records</span> associated with your domain, allowing you to create, update, and delete records such as A, CNAME, and others.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>Amazon Certificate Manager (ACM)</strong> is a fully managed service that simplifies the process of provisioning, managing, and deploying <span style="text-decoration: underline">SSL/TLS certificates</span> for use with AWS services. With ACM, cloud engineering teams can efficiently secure the website or application by encrypting traffic between clients and servers, ensuring data integrity and confidentiality.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">If you are interested and want to follow along, please refer to the <a href="https://github.com/kunduso/add-aws-elb-ec2-private-subnet-terraform/tree/add-acm-r53" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">GitHub repository: kunduso/add-aws-elb-ec2-private-subnet-terraform</span></span></span></a>. <span style="color: #ff0000">Please note the branch name is</span> <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">add-acm-r53</code>. I used an externally purchased domain (from Squarespace); hence, these steps will apply to similar scenarios.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Pre-requisite:</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Purchase a domain and have access to change the domain nameservers.</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Since I was building upon a previous use case, I recommend you first review that <a href="https://skundunotes.com/2023/07/26/attach-an-application-load-balancer-to-amazon-ec2-instances-in-a-private-subnet/" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">-attach-an-application-load-balancer-to-amazon-ec2-instances-in-a-private-subnet</span></span></span></a>.</span></span></span>

<span style="text-decoration: underline"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000;text-decoration: underline">This use case can be classified into seven detailed steps:</span></span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>1.</strong> Create the Amazon Route 53 Hosted Zone</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>2.</strong> Request an SSL/TLS Certificate from the AWS Certificate Manager</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>3.</strong> Add ACM Certificate Validation Records to Route 53 hosted zone</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>4.</strong> Validate the ACM Certificate</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>5.</strong> Configure Load Balancer Listeners for HTTPS Redirection</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>6.</strong> Update Security Group Rule for HTTPS Traffic</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>7.</strong> Create an A Record for the Load Balancer in Route 53 Hosted Zone</span></span></span>

<img class="alignnone size-large wp-image-5958" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-16.png?w=656" alt="" width="656" height="195" />

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 1: Create the Amazon Route 53 Hosted Zone</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">As discussed, <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-working-with.html" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">a hosted zone</span></span></span></a> is a container for all the records, and it is the first AWS cloud resource to be created. The hosted zone manages DNS records for the domain, which is stored as a variable <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">domain_name</code>.</span></span></span>
<img class="alignnone size-full wp-image-5864" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-1.png" alt="112-image-1" width="447" height="108" />
<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 2: Request an SSL/TLS Certificate from the AWS Certificate Manager</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The ACM certificate ensures secure communication between clients and the application load balancer. Per <a href="https://docs.aws.amazon.com/acm/latest/userguide/setup.html" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">AWS-Docs</span></span></span></a>, with AWS Certificate Manager (ACM), you can provision and manage SSL/TLS certificates for your AWS-based websites and applications. The validation method is <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">DNS</code> to prove domain ownership.</span></span></span>
<img class="alignnone size-full wp-image-5865" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-2.png" alt="112-image-2" width="382" height="178" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Managing certificates via ACM is convenient because (i) it is free to use with AWS services, (ii) it renews automatically, and (iii) AWS manages it, hence freeing one from manual certificate management tasks. After requesting the SSL/TLS certificate, ACM requires domain ownership verification through DNS validation.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 3: Add ACM Certificate Validation Records to the Amazon Route 53 hosted zone</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This step creates the necessary CNAME records in the Route 53 hosted zone using the validation information provided by ACM. The Terraform code uses a <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">for_each</code> loop to create these validation records, where each record contains specific values (name, type, and record value) that ACM will check to verify the domain ownership and issue the certificate.</span></span></span>
<img class="alignnone size-full wp-image-5866" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-3.png" alt="112-image-3" width="730" height="316" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Until this step, the ACM certificate is still in the "Pending validation" status.</span></span></span>
<img class="alignnone size-full wp-image-5890" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-4-1.png" alt="112-image-4" width="1244" height="342" />
<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 4: Validate the ACM Certificate</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This step ensures that Terraform waits for ACM to complete the certificate validation process before proceeding.</span></span></span>
<img class="alignnone size-full wp-image-5868" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-5.png" alt="112-image-5" width="726" height="87" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The resource takes <span style="text-decoration: underline">two essential parameters:</span> the certificate ARN from the previously created certificate and a list of the fully qualified domain names (FQDNs) from the validation records. By creating this validation resource, Terraform pauses the execution until ACM successfully validates the certificate using the DNS records created in the previous step. This is crucial because other AWS resources, such as Load Balancers, require a <span style="text-decoration: underline">fully validated certificate before they can be used</span>.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 5: Configure Load Balancer Listeners for HTTPS Redirection</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I modified the load balancer configuration to handle secure HTTPS traffic in this step.</span></span></span>
<img class="alignnone size-full wp-image-5869" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-6.png" alt="112-image-6" width="396" height="325" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">In the previous use case, the listener on port <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">#80</code> (HTTP) was configured to forward all HTTP traffic to the target group. In this updated use case, the listener is reconfigured to automatically redirect all incoming HTTP traffic to HTTPS (port <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">#443</code>) using a permanent redirect (HTTP 301 status code).</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Subsequently, a new HTTPS listener is created on port <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">#443</code>, which uses the validated ACM certificate to terminate SSL/TLS connections. This listener is configured with a modern security policy (<code style="background-color: #dcdcdc;font-size: 15px;color: #000000">ELBSecurityPolicy-TLS13-1-2-2021-06</code>) and forwards the decrypted traffic to the target group. This setup ensures all communication with the application is encrypted, as any attempts to access the application via HTTP will automatically be redirected to use HTTPS.</span></span></span>
<img class="alignnone size-full wp-image-5870" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-7.png" alt="112-image-7" width="601" height="252" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">By offloading SSL termination to the ALB, businesses can centralize certificate management, simplify configurations, and reduce the computational load on backend servers, improving performance.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 6: Update Security Group Rule for HTTPS Traffic</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">In the previous use case, the security group ingress rule allowed HTTP traffic on port <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">#80</code>. The updated security group rule now permits inbound HTTPS traffic on port <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">#443</code> from any source IP address to the load balancer, enabling secure encrypted communication between clients and the application.</span></span></span>
<img class="alignnone size-full wp-image-5871" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-8.png" alt="112-image-8" width="658" height="179" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>Note:</strong> While this use-case allows traffic from <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">0.0.0.0/0</code> (any IP address), this is a common configuration for public-facing load balancers. However, if your application needs to be accessed only from specific IP ranges, you should restrict the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">cidr_blocks</code> accordingly.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 7: Create an A Record for the Load Balancer in Route 53 Hosted Zone</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This final step creates an alias record in Route 53 that points the domain name to the Application Load Balancer.</span></span></span>
<img class="alignnone size-full wp-image-5872" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-9.png" alt="112-image-9" width="466" height="231" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Instead of a traditional A record with an IP address, I created an alias record that automatically tracks the load balancer's DNS name. The alias record is configured to evaluate the target's health, ensuring traffic is only routed when the load balancer is healthy. This setup allows users to access the application using the domain name instead of the load balancer's default DNS name, which was the case in the previous use case.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Those are all the resources required to ensure the application receives requests over HTTPS. When users access the domain, they will be automatically redirected to the secure HTTPS version if they try to use HTTP. The traffic flows through the Application Load Balancer, which terminates SSL using the ACM certificate and then forwards the requests to the application running on the EC2 instances in the private subnet. This setup provides a secure, highly available infrastructure that follows AWS best practices for web applications.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This setup is beneficial for organizations looking to improve the security, scalability, and manageability of their web applications. Using Amazon Route 53, ACM, and an Application Load Balancer (ALB), cloud engineering teams can securely route traffic to their backend servers, ensuring HTTPS encryption.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The next step is understanding how to automate the deployment using GitHub Actions.</span></span></span>

<strong><span style="font-size: 22px"><span style="font-family: calibri"><span style="color: #000000">Automation Using GitHub Actions</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Because of the nature of the AWS cloud resources and the fact that I had an externally purchased domain, I required the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">terraform apply</code> step to execute in two phases (via two GitHub Actions jobs). This use case required a mechanism to create the Amazon Route53 hosted zone first so that the nameserver value was available to update in the external domain (Squarespace) name server. Then, the rest of the AWS cloud resources can be created.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">If you are new to GitHub Actions and Terraform, please review - <a href="https://skundunotes.com/2023/03/07/ci-cd-with-terraform-and-github-actions-to-deploy-to-aws/" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">ci-cd-with-terraform-and-github-actions-to-deploy-to-aws</span></span></span></a>.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">For this approach, I used <span style="text-decoration: underline">two GitHub Actions jobs and two environments</span>. The deployment to the second environment was managed using two environments and a protection rule (required reviewers).</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Below is an image of the deployment protection rule for the second environment, <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">production-infrastructure</code>. As you can see, it requires my approval to proceed.
<img class="alignnone size-full wp-image-5873" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-10.png" alt="112-image-10" width="731" height="359" />
</span></span></span><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Let us now review the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">terraform.yml</code> file at <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">.github\workflows</code> path in the repository.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">As we discussed earlier, the AWS Route53 hosted zone must be created in the first GitHub Actions job so that we have the values of the domain name servers. As you can examine from the image below of the GitHub Actions workflow, this step only creates the Amazon Route53 hosted zone. That is managed via the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">-target</code> flag in the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">terraform apply</code> command.</span></span></span>
<img class="alignnone size-full wp-image-5874" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-11.png" alt="112-image-11" width="634" height="72" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">These nameserver values were displayed at the end of a <code>terraform apply</code> step via the output reference, as seen from the below reference image.</span></span></span>
<img class="alignnone size-full wp-image-5875" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-12.png" alt="112-image-12" width="589" height="237" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I updated these <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">name_server</code> values in the Domain Nameservers section of my externally registered domain (Squarespace). That update triggers a DNS propagation. I do not manage the DNS propagation mechanism, so after updating the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">name_server</code> values, I approved the second phase of the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">terraform apply</code> step so that the remaining resources (as part of the second GitHub Action jobs) were provisioned.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Once the DNS changes had propagated, the ACM validation also completed. From the image below, you can see that it took upward of 3 minutes. At times, it has also taken close to 9 minutes.</span></span></span>
<img class="alignnone size-full wp-image-5876" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-13.png" alt="112-image-13" width="696" height="249" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">As the image below shows, provisioning and updating all the AWS cloud resources took a little over 6 minutes.</span></span></span>
<img class="alignnone size-full wp-image-5877" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-14.png" alt="112-image-14" width="720" height="346" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Once both the GitHub Actions jobs had been completed, I navigated to the domain and was greeted by the static page. The request was directed to another Amazon EC2 instance on each page refresh.</span></span></span>
<img class="alignnone size-full wp-image-5878" src="https://skdevops.wordpress.com/wp-content/uploads/2025/03/112-image-15.png" alt="112-image-15" width="698" height="322" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">That brings us to the end of this note. This was a pretty long note, so let's do a <span style="text-decoration: underline">quick recap</span>.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This blog explored how to <span style="text-decoration: underline">securely route traffic</span> using Amazon Route 53, an Application Load Balancer (ALB), and AWS Certificate Manager (ACM) to serve a static web page with HTTPS <span style="text-decoration: underline">using a custom domain</span>. We also learned how to <span style="text-decoration: underline">automate the deployment process</span> using GitHub Actions, <span style="text-decoration: underline">splitting it into two phases</span>: first, setting up Amazon Route 53 and then provisioning the rest of the AWS resources.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Following these steps, you'll have a secure and <span style="text-decoration: underline">scalable infrastructure</span> that <span style="text-decoration: underline">encrypts traffic</span> and ensures your application is accessible <span style="text-decoration: underline">using a custom domain over HTTPS</span>. If you have any questions or suggestions, please use the comments section below.</span></span></span>
