---
title: "Getting started with Ephemeral workspaces in HCP Terraform"
date: 2025-02-20 16:42:58 +0000
categories: []
tags: []
---

<p><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>Ephemeral</strong> refers to something that does not last for a long time. In HCP Terraform, <a href="https://developer.hashicorp.com/terraform/cloud-docs/workspaces" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">a workspace</span></span></span></a> is a group of infrastructure resources managed by Terraform. Hence, an <span style="text-decoration: underline">ephemeral workspace</span> does not last for a long time. This implies that it is suitable for IaC use cases where the resources are provisioned for a <span style="text-decoration: underline">short duration</span>, primarily for a proof of concept or to verify a specific functionality.</span></span></span><br /><!--more--><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">In this note, you will learn how to <span style="text-decoration: underline">implement ephemeral workspace</span> in your HCP Terraform organization.</span></span></span></p>
<p><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong><em>Please note:</em></strong> <em>Ephemeral workspace management with the Terraform provider is <span style="text-decoration: underline">currently supported</span> only for HCP Terraform Plus and Terraform Enterprise (GA) organizations. Please navigate to the Organization Settings → Plan &amp; Billings to verify the current plan.</em></span></span></span></p>
<p><strong><span style="font-size: 22px"><span style="font-family: calibri"><span style="color: #000000">Pre-requisite:</span></span></span></strong><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Before we get started, please learn about <a href="https://developer.hashicorp.com/terraform/cloud-docs" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">HCP Terraform</span></span></span></a> and how it differs from the community edition Terraform. It’ll also be helpful to study this note  - <a href="http://skundunotes.com/2025/01/03/provision-aws-resources-with-github-and-hcp-terraform/" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">provisioning AWS resources with HCP Terraform</span></span></span></a>. In that note, you’ll learn how to create an HCP Terraform organization, a project inside the organization, a workspace in a project, and store IAM credentials as secure variables in the workspace. You will also require a VCS (version control system) to associate with the workspace. For this use case, you may fork my <a href="https://github.com/kunduso/hashitalk-2025-ephemeral-workpsace" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">GitHub repository: kunduso/hashitalk-2025-ephemeral-workpsace</span></span></span></a> and refer to that in the HCP Terraform workspace. Please update the values of <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">organization</code> and <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">workspaces</code> properties in the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">provider.tf</code> file with your organization and workspace values.</span></span></span></p>
<p><strong><span style="font-size: 22px"><span style="font-family: calibri"><span style="color: #000000">Setup:</span></span></span></strong><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Once you have all the required pre-requisites in place, you are ready to enable <em>ephemeral workspace</em>. On your workspace settings, scroll down and select the <strong>“Destruction and Deletion”</strong> option.</span></span></span><br /><img class="alignnone size-full wp-image-5691" src="https://skdevops.wordpress.com/wp-content/uploads/2025/02/111-image-1.png" alt="111-image-1" width="318" height="748" /><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The above image is the settings of my HCP Terraform organization (kunduso) with a workspace (app-three).</span></span></span><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Under the <strong>“Destruction and Deletion”</strong> settings, examine <strong>“Automatically destroy”</strong> and click on the button - “Set up auto-destroy”.</span></span></span><br /><img class="alignnone size-full wp-image-5692" src="https://skdevops.wordpress.com/wp-content/uploads/2025/02/111-image-2.png" alt="111-image-2" width="794" height="599" /><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Two mechanisms support ephemeral workspace. If you want the workspace to be decommissioned on a particular date, select - <strong>“Destroy at specific time”</strong>. Alternatively, suppose you are unsure how long it would take to test out a particular POC or use case and would want the workspace active until there is no activity for a specific time. In that case, you may select <strong>“Destroy if inactive”</strong> and specify how long the activity will be watched before decommissioning the workspace.</span></span></span></p>
<p><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Since I was testing out the functionality, I selected <strong>“Destroy if inactive”</strong> and set the timer to 1 hour (the shortest possible time frame).</span></span></span><br /><img class="alignnone size-full wp-image-5693" src="https://skdevops.wordpress.com/wp-content/uploads/2025/02/111-image-3.png" alt="111-image-3" width="961" height="498" /><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I made my code changes in a <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">non-main</code> branch, pushed the changes up, and created a pull request that generated a speculative plan. After merging the changes to the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">main</code> branch, an HCP Terraform workflow kicked off and created the AWS cloud resources.</span></span></span><br /><img class="alignnone size-full wp-image-5694" src="https://skdevops.wordpress.com/wp-content/uploads/2025/02/111-image-4.png" alt="111-image-4" width="940" height="202" /><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">After the pipeline had succeeded, the workspace was updated with information about the AWS cloud resources, and the timer to decommission the workflow also started.</span></span></span><br /><img class="alignnone size-full wp-image-5695" src="https://skdevops.wordpress.com/wp-content/uploads/2025/02/111-image-5.png" alt="111-image-5" width="899" height="501" /><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">After an hour of no activity, a new run was auto-triggered via an API to start the decommissioning process.</span></span></span><br /><img class="alignnone size-full wp-image-5696" src="https://skdevops.wordpress.com/wp-content/uploads/2025/02/111-image-6.png" alt="111-image-6" width="1253" height="253" /><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">What is considered an activity?</span></span></span><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">A <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">terraform apply</code> step is considered an activity, so if you’ve implemented a speculative plan (as part of a pull request), that will not be viewed as an activity.</span></span></span></p>
<p><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Please note that you may also <span style="text-decoration: underline">decommission a workspace from the Project settings</span>. Navigate to Project → select the Project (name) → Settings → Auto-destroy workspaces, and click on the button <strong>“Set up default”</strong>.</span></span></span><br /><img class="alignnone size-full wp-image-5702" src="https://skdevops.wordpress.com/wp-content/uploads/2025/02/111-image-7.png" alt="111-image-7" width="1133" height="454" /><br /><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">And that brings us to the end of this note. We learned how to <span style="text-decoration: underline">enable ephemeral workspaces with HCP Terraform</span>. If you have any questions, please use the comments section to ask your question.</span></span></span></p>

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->
