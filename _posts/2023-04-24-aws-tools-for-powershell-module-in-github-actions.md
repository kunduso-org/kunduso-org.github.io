---
title: "AWS Tools for PowerShell module in GitHub Actions"
date: 2023-04-24 01:45:19 +0000
categories: []
tags: []
---

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Previously, I wrote a note on <a href="https://skundunotes.com/2022/09/18/install-and-use-aws-tools-for-powershell-on-azure-devops-pipelines-yaml/" target="_blank" rel="noopener">using AWS Tools for PowerShell in Azure Pipelines</a>, and in this note, I show how to use that in GitHub Actions. If you are new to AWS Tools for Powershell, I recommend reading about that at <a href="https://docs.aws.amazon.com/powershell/latest/userguide/pstools-welcome.html" target="_blank" rel="noopener">AWS Docs</a>.</span></span></span>
<!--more-->

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The process can be broken down into three steps:</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">1. Configure AWS Credentials</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">2. Install the necessary modules, and</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">3. Use AWS Tools for the PowerShell module command</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">If you are interested, you can follow along by accessing the code stored in my <a href="https://github.com/kunduso/TestProjects/blob/main/.github/workflows/pipeline-install-awstools.yml" target="_blank" rel="noopener">GitHub repo: TestProjects</a>, and the <a href="https://github.com/kunduso/TestProjects/actions/workflows/pipeline-install-awstools.yml" target="_blank" rel="noopener">GitHub Actions pipeline: install-aws-tools-ps</a>.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 1: Configure AWS Credentials</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I used the <span style="text-decoration: underline"><a href="https://github.com/aws-actions/configure-aws-credentials" target="_blank" rel="noopener">Configure AWS Credentials action</a></span> with my GitHub Actions pipeline to manage the IAM aspect -authentication and authorization- for the pipeline. This step enables GitHub Actions to acquire short-term AWS credentials to communicate with the AWS cloud. </span></span></span><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I have a detailed note on this concept covered in my note at -<a href="https://skundunotes.com/2023/02/28/securely-integrate-aws-credentials-with-github-actions-using-openid-connect/" target="_blank" rel="noopener">securely-integrate-aws-credentials-with-github-actions-using-openid-connect.</a></span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 2: Install the necessary modules</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">All the modules listed in the <code>aws-ps-modules.json</code> are checked and installed by the idempotent logic in the <code>InstallAWSTools.ps1</code> PowerShell file (access <a href="https://github.com/kunduso/TestProjects/tree/main/install-aws-tools-powershell" target="_blank" rel="noopener">GitHub repo here</a>). And the PowerShell file is referenced in the GitHub Actions pipeline via the block below:</span></span></span>
<img class="alignnone size-full wp-image-2543" src="https://skundunotes.com/wp-content/uploads/2023/04/75-image-2.png" alt="75-image-2" width="942" height="180" />
<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Step 3: Use AWS Tools for the PowerShell module command</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This is an example step to demonstrate that the GitHub Actions pipeline can securely communicate with the AWS cloud. The step below checks if an Amazon S3 bucket by that name exists and returns true if the bucket exists or false.</span></span></span>
<img class="alignnone size-full wp-image-2544" src="https://skundunotes.com/wp-content/uploads/2023/04/75-image-3.png" alt="75-image-3" width="852" height="97" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The step uses the <a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Test-S3Bucket.html" target="_blank" rel="noopener">Test-S3Bucket Cmdlet</a> to check that. This step would have errored if I had not correctly set the Configure AWS Credentials (Step 1) and had not installed the AWS Tools for PowerShell module (Step 2). I wanted to use the S3 cmdlet and specified the required PowerShell module (<code>AWS.Tools.S3</code>)</span></span></span>Â <span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">in the <code>aws-ps-modules.json</code> file. If your use case demands interaction with other AWS resources, please add them accordingly. For a list of all AWS resources, you can access - <a href="https://www.powershellgallery.com/packages?q=AWS.Tools" target="_blank" rel="noopener">PowerShellGallery-AWS.Tools</a>.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">As you might have noted, I did not add a step in the GitHub Actions pipeline to <span style="text-decoration: underline">remove the credentials</span>; the Configure AWS Credentials Action <span style="text-decoration: underline">automatically triggers that step</span>. Please check the pipeline log run to verify.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">And that is how to use AWS Tools for PowerShell module in GitHub Actions. I hope you found this note valuable. I use this logic often, so if you have any questions, please do not hesitate to reach out.</span></span></span>
