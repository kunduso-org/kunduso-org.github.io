---
title: "Provision AWS Resources with GitHub and HCP Terraform"
date: 2025-01-04 05:11:01 +0000
categories: []
tags: []
---

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>HCP (HashiCorp Cloud Platform) Terraform</strong> is a managed service that allows cloud infrastructure engineers to provision, manage, and scale infrastructure u<span style="text-decoration: underline">sing Terraform securely, efficiently, and in an automated manner</span>. It <span style="text-decoration: underline">eliminates the need to maintain a Terraform infrastructure</span>, such as the underlying execution environment and state management. It provides a hassle-free way to manage cloud resources while leveraging Terraform's powerful infrastructure-as-code capabilities.</span></span></span>

<!--more--><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">In <strong>open-source Terraform</strong>, the cloud infrastructure engineering team has to manage the setup and maintenance of the Terraform execution environment, including <span style="text-decoration: underline">configuring backends for state storage</span>, ensuring secure access to sensitive credentials, and <span style="text-decoration: underline">handling the scaling and reliability of Terraform execution servers</span>. They are also responsible for managing the state files, version control, and addressing potential collaboration issues, such as state file locking and coordination between team members.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">In contrast to the complexities of managing infrastructure with open-source Terraform, <strong>HCP Terraform</strong> simplifies these processes by managing the execution environment maintenance, state management, and scaling. This allows teams to focus more on the business logic of their infrastructure. <span style="text-decoration: underline">This note demonstrates</span> how I followed the <a href="https://developer.hashicorp.com/terraform/tutorials/cloud-get-started" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">Get Started - HCP Terraform</span></span></span></a>. Per the guide, currently, HCP Terraform supports <span style="text-decoration: underline">three workflows</span>, and I'll be using the UI/Version Control System driven workflow.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">1. Create a free account and Organization at HCP Terraform</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The first step to using <a href="https://app.terraform.io/public/signup/account" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">HCP Terraform</span></span></span></a> is to create an account. You can create an Organization with your first login to this portal. All you need is an email address and access to the email to verify that it is yours.</span></span></span>
<img class="alignnone size-full wp-image-5363" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-1-1.png" alt="108-image-1" width="659" height="379" />
<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">2. Create a project in HCP Terraform</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">After creating an organization, the next step was to create a Project to host all the information related to provisioning the AWS cloud resources. Although a <span style="text-decoration: underline">Default Project</span> was available, I created a new one for this use case.</span></span></span>
<img class="alignnone size-full wp-image-5364" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-2-1.png" alt="108-image-2" width="876" height="863" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I selected Projects → New Project on the left-hand vertical pane to create a new project. I named the project <strong>app-two</strong>. Please choose a name that is suitable to your use case. </span></span></span><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Please refer to the <a href="https://developer.hashicorp.com/terraform/cloud-docs/projects" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">Terraform-Docs</span></span></span></a> for more information on HCP Terraform Projects.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">3. Create a GitHub repository</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I created a folder (Get-Started-HCP-Terraform) in my <a href="https://github.com/kunduso/LearnTerraform" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">GitHub repository: kunduso/LearnTerraform</span></span></span></a> for this use case and then checked out a branch <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">add-hcp-tf</code> to add the foundational Terraform configuration for this project. If you compare the repository code with an open-source Terraform configuration, the only difference is that it has the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">cloud {}</code> block with the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">organization</code> and <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">workspaces{}</code> configuration.</span></span></span>
<img class="alignnone size-full wp-image-5365" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-3-1.png" alt="108-image-3" width="458" height="614" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This repository also contained the code to provision a few AWS cloud resources.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><em><span style="color: #ff0000">Please Note:</span></em> Making development changes in a non "main" branch is good programming practice. Moreover, I intended to demonstrate how HCP Terraform Runs execute on Pull Request (PR), and hence, I made code changes that could be merged to the main branch via a PR.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">4. Create a workspace in HCP Terraform</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Workspace is an essential concept with HCP Terraform, so if you are unfamiliar with it, please read about it at - <a href="https://developer.hashicorp.com/terraform/cloud-docs/workspaces" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">HCP Terraform Workspaces</span></span></span></a>. </span></span></span><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Then, back on the HCP Terraform console under the project (<strong>app-two</strong>), there was a provision to create a new workspace.</span></span></span>
<img class="alignnone size-full wp-image-5366" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-4-1.png" alt="108-image-4" width="1310" height="725" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Select New → Workspace.</span></span></span>
<img class="alignnone size-full wp-image-5367" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-5-1.png" alt="108-image-5" width="952" height="629" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I selected the Version Control Workflow and then was presented with the option of choosing a GitHub repository.</span></span></span>
<img class="alignnone size-full wp-image-5368" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-6-1.png" alt="108-image-6" width="857" height="666" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I selected my GitHub account and repository, <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">kunduso/LearnTerraform</code> after which I could configure the Workspace.</span></span></span>
<img class="alignnone size-full wp-image-5369" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-7-1.png" alt="108-image-7" width="820" height="759" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I gave the same workspace name specified in the Terraform configuration in my GitHub repository and clicked Create.</span></span></span>
<img class="alignnone size-full wp-image-5370" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-8-1.png" alt="108-image-8" width="830" height="540" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">After the Workspace was created, I reviewed all its properties, such as Run Tasks, Run Triggers, and Version Control. These properties are available under Workspace settings.</span></span></span>
<img class="alignnone size-full wp-image-5371" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-9-1.png" alt="108-image-9" width="888" height="589" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I found the Version Control option particularly interesting since it contained essential configurations such as the working directory, the VCS triggers, and the Automatic Run triggering. Since the code in my repository was in the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">Get-Started-HCP-Terraform</code> folder, I set that value as the Terraform working directory.</span></span></span>
<img class="alignnone size-full wp-image-5372" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-10-1.png" alt="108-image-10" width="615" height="448" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">After reviewing the Workspace Settings, I navigated to the Workspace and selected Variables. This is where I stored the Workspace variables, such as the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">access_key</code> and <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">secret_key</code>, and marked them as sensitive so that the values wouldn't be displayed in any logs.</span></span></span>
<img class="alignnone size-full wp-image-5373" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-11-1.png" alt="108-image-11" width="972" height="725" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Those are all the settings required to get started on the HCP Terraform platform. The next step was to create a Pull Request to merge the code changes into the main branch.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">5. Create a Pull Request in GitHub</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">I created a Pull Request on the GitHub portal to merge the changes to the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">master</code> branch. After I created a Pull Request in GitHub, I could see that a terraform plan step started and finished successfully in HCP Terraform → Workspace → app-two-layer-0 → Runs.</span></span></span>
<img class="alignnone size-full wp-image-5374" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-12-1.png" alt="108-image-12" width="1078" height="576" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Under the latest Workspace run, I could review a list of the resources that would be created once the changes are merged into the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">master</code> branch. I could also examine the cost estimates that were a part of the terraform plan step, which was helpful.</span></span></span>
<img class="alignnone size-full wp-image-5375" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-13-1.png" alt="108-image-13" width="1089" height="726" />
<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">6. Merge changes to the main branch</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Since the changes looked good, I was ready to merge them into the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">master</code> branch from the GitHub portal.</span></span></span>
<img class="alignnone size-full wp-image-5376" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-14-1.png" alt="108-image-14" width="931" height="470" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">On doing so, another (HCP Terraform) Workspace Run was triggered and was waiting for my review and approval before the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">terraform apply</code> step was run.
<img class="alignnone size-full wp-image-5377" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-15-1.png" alt="108-image-15" width="921" height="456" />
</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">For details on the state of the Workspace run, I clicked on the <strong>Run Title</strong>, and the request navigated to the details page, as shown below.</span></span></span>
<img class="alignnone size-full wp-image-5378" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-16-1.png" alt="108-image-16" width="940" height="747" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">At this stage, I could apply or discard the workspace run. Since this looked good, I chose the <strong>Confirm &amp; apply</strong> button, which continued the same workspace run.</span></span></span>
<img class="alignnone size-full wp-image-5379" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-17-1.png" alt="108-image-17" width="916" height="521" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">After the successful run, I reviewed the Workspace and found a new file under the States.</span></span></span>
<img class="alignnone size-full wp-image-5380" src="https://skundunotes.com/wp-content/uploads/2025/01/108-image-18-1.png" alt="108-image-18" width="862" height="285" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This is the state file with information about the AWS cloud resources provisioned by HCP Terraform from the configurations stored in the GitHub repository: kunduso/LearnTerraform.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><span style="text-decoration: underline">That brings us to the end of this use case:</span> how to provision AWS cloud resources using HCP Terraform with the configuration stored in a GitHub repository. If you have experience working with open-source Terraform, managing AWS cloud resources <span style="text-decoration: underline">using HCP Terraform has no significant learning curve</span>.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">In summary, HCP Terraform offers a <strong>secure</strong> and <strong>scalable</strong> way to manage cloud infrastructure, significantly reducing the complexities of using open-source Terraform. While it may not be for all cloud engineering teams, especially those needing high levels of customization, its ease of use makes it an <span style="text-decoration: underline">excellent choice for teams looking to streamline their workflows</span>. Whether you're just starting or have experience with Terraform, I encourage you to explore the platform and leverage its full potential. For further learning, dive into the HashiCorp documentation or join the community for more tips and discussions.</span></span></span>
