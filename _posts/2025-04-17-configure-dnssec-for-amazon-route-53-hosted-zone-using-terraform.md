---
title: "Configure DNSSEC for Amazon Route 53 hosted zone using Terraform"
date: 2025-04-17 08:57:00 +0000
categories: []
tags: []
---

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>DNSSEC (Domain Name System Security Extensions)</strong> is a security protocol that adds cryptographic signatures to DNS records. This ensures that users are connecting to legitimate websites rather than malicious ones. It also helps <span style="text-decoration: underline">prevent attacks like DNS spoofing or cache poisoning</span> by verifying the authenticity and integrity of DNS responses.</span></span></span>

<!--more--><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>Amazon Route 53</strong> is a scalable and highly available domain name system (DNS) web service that helps route end-user requests to applications hosted on AWS. It supports domain registration, DNS routing, and target health checking to ensure reliable application performance. Route 53 also <span style="text-decoration: underline">supports security features like DNSSEC</span>. Integrating Amazon Route 53 with DNSSEC <span style="text-decoration: underline">tightens security</span> to ensure the authenticity of DNS responses. This helps protect users from malicious attacks, increasing trust and integrity for the Amazon Route 53 hosted domains.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">In this note, you will learn <strong>how to create a chain of trust using DNSSEC</strong> with an Amazon Route 53 hosted zone. And since we’re following DevOps best practices, this use case is built using <strong>Terraform</strong> and automated using <strong>GitHub Actions</strong>.</span></span></span>

<strong><span style="font-size: 22px"><span style="font-family: calibri"><span style="color: #000000">Pre-requisite</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This note expands on a previous use case, where a static web page was securely accessed over HTTPS (port 443) through a custom domain name instead of using the default load balancer DNS. That setup was achieved using Amazon Route 53 for DNS management and Amazon Certificate Manager (ACM) for SSL/TLS certificate management attached to a load balancer to ensure secure, reliable access to the application. Please familiarize yourself with the AWS cloud services discussed in  - <a href="http://skundunotes.com/2025/03/25/automate-amazon-route-53-hosted-zone-acm-and-load-balancer-provisioning-with-terraform-and-github-actions/" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">automate-amazon-route-53-hosted-zone-acm-and-load-balancer-provisioning-with-terraform-and-github-actions</span></span></span></a>, since this use case builds upon that.</span></span></span>

<strong><span style="font-size: 22px"><span style="font-family: calibri"><span style="color: #000000">Deploy AWS cloud resources</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">If you are interested and want to follow along, please refer to the <a href="https://github.com/kunduso/add-aws-elb-ec2-private-subnet-terraform/tree/enable-dnssec-route53" target="_blank" rel="noopener"><span style="color: #0000ff">GitHub repository: kunduso/add-aws-elb-ec2-private-subnet-terraform</span></a>. <span style="color: #ff0000">Please note that the branch name is</span> <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">enable-dnssec-route53</code>.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><span style="text-decoration: underline">DNSSEC adds digital signatures to DNS records</span> so that when someone looks up a domain (like amazon.com), they can verify that the DNS info came from the right source and wasn't tampered with. In AWS, that is achieved by - <strong>(i)</strong> creating an asymmetric KMS Key for DNSSEC signing, <strong>(ii)</strong> enabling it for use with Amazon Route53, <strong>(iii)</strong> associating the KMS Key with the Amazon Route53 hosted zone to create a Key Signing Key, <strong>(iv)</strong> activating DNSSEC for the hosted zone, and <strong>(v)</strong> updating the DS records with the domain registrar to link the domain to the DNSSEC chain of trust.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Here is a <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/dns-configuring-dnssec-enable-signing.html" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">link to a detailed guide from AWS-Docs</span></span></span></a> on enabling DNSSEC signing and establishing a chain of trust, and a <a href="https://www.youtube.com/watch?v=YlAlMZgPXG4" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">YouTube video: Securing Route 53 hosted zone with DNSSEC.</span></span></span></a></span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Let's go through these in detail, along with the Terraform code.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">1. Create an Asymmetric KMS Key for DNSSEC Signing</span></span></span></strong>
<img class="alignnone size-full wp-image-6089" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-1.png" alt="" width="539" height="129" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The above Terraform code creates an asymmetric KMS key specifically for DNSSEC signing. The key must be created in the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">us-east-1</code> region. It uses the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">ECC_NIST_P256</code> algorithm for signing. The <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">key_usage</code> is set to <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">"SIGN_VERIFY"</code> as it is used for cryptographic signing operations.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This asymmetric key pair is crucial for DNSSEC's security model, where:</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">- The private key component remains secured within AWS KMS</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">- The public key component is used in DNS to allow verification of the signed records</span></span></span>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The KMS key for DNSSEC must be created in the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">us-east-1</code> (N. Virginia) region, specifically because this is a limitation imposed by Amazon Route 53 for DNSSEC implementation</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">2. Configure KMS Key Policy for Route 53 DNSSEC Access</span></span></span></strong>
<img class="alignnone size-full wp-image-6090" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-2.png" alt="" width="449" height="820" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The policy configuration grants necessary permissions for the AWS account root user and the Route 53 DNSSEC service. The first statement (not shown due to space) enables full KMS permissions for the account root user. The second and third statements allow Route 53's DNSSEC service to perform required operations like signing, describing the key, and managing grants. The condition ensures grants are only created for AWS services.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">3. Create a Key Signing Key (KSK) for the Hosted Zone</span></span></span></strong>
<img class="alignnone size-full wp-image-6091" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-3.png" alt="" width="623" height="141" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The image above demonstrates creating a <strong>Key Signing Key</strong> that Amazon Route 53 uses to sign the DNSKEY record set. It associates the KMS key with the hosted zone and sets it <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">ACTIVE</code> for immediate use. The <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">depends_on</code> block manages the sequence of resource provisioning and de-provisioning.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">4. Enable DNSSEC Signing for the Hosted Zone</span></span></span></strong>
<img class="alignnone size-full wp-image-6092" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-4.png" alt="" width="411" height="140" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This step in the provisioning process enables DNSSEC signing for the hosted zone. The <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">depends_on</code> block ensures the <span style="text-decoration: underline">key signing key</span> and <span style="text-decoration: underline">ACM certificate validation</span> are completed before enabling DNSSEC. That is necessary to maintain the DNS resolution during the DNSSEC enablement process.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Those are all the AWS cloud resources required to enable DNSSEC on the hosted zone. The next step is to establish the chain of trust by populating the DS records from the Amazon Route 53 DNSSEC Key signing key details.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The repository also contains an <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">output.tf</code> file that displays the values after the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">terraform apply</code> step is successfully run.</span></span></span>
<img class="alignnone size-full wp-image-6093" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-5.png" alt="" width="529" height="176" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Here is a screenshot after a successful <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">terraform apply</code> step:</span></span></span>
<img class="alignnone size-large wp-image-6094" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-6-1.png?w=656" alt="" width="656" height="85" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">ds_record</code> provides the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">key_tag</code>, the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">signing_algorithm</code>, the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">digest_algorithm</code>, and finally, the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">digest</code>.</span></span></span>

<strong><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">5. Update the Delegation Signer (DS) Records</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The values from the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">terraform apply</code> output must be updated into the DNSSEC DS records. Below is a screenshot of the placeholder to update in Squarespace.</span></span></span>
<img class="alignnone size-large wp-image-6095" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-7.png?w=656" alt="" width="656" height="269" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Once these values are updated, the DNSSEC chain of trust is established.</span></span></span>

<strong><span style="font-size: 22px"><span style="font-family: calibri"><span style="color: #000000">DNSSEC Verification</span></span></span></strong>
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">There are a few mechanisms to check if the chain of trust is established.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Below is a screenshot of the result of running the PowerShell command <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">Resolve-DnsName -Name kunduso.com -Type DNSKEY</code></span></span></span>
<img class="alignnone size-large wp-image-6096" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-8.png?w=656" alt="" width="656" height="119" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This output shows that DNSSEC is configured correctly for <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">kunduso.com</code>. Let's break down what the DNSKEY records mean:</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The first DNSKEY record has a flag value of 256, which identifies it as the Zone Signing Key (ZSK). This key is used to sign all records within the zone. It uses Algorithm 13, which corresponds to <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">ECDSAP256SHA256</code>.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The second DNSKEY record has a flag value of 257, identifying it as the Key Signing Key (KSK). Like the ZSK, it also uses Algorithm 13 (<code style="background-color: #dcdcdc;font-size: 15px;color: #000000">ECDSAP256SHA256</code>). This key is important because it is referenced by the Delegation Signer (DS) record in the parent zone—in this case, it is managed by Squarespace.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The presence of both the ZSK and KSK, using the correct algorithm, aligns with Amazon Route 53 DNSSEC best practices. Their successful return confirms that DNSSEC is configured correctly, the keys are correctly published in the DNS zone, and the DNS infrastructure is accurately serving DNSSEC-related records. However, please note that this is only partially verified.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">The next step is to resolve the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">DnsName</code> for DS records, which is managed via the PowerShell command <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">Resolve-DnsName -Name kunduso.com -Type DS</code></span></span></span>
<img class="alignnone size-large wp-image-6097" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-9.png?w=656" alt="" width="656" height="73" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">As you can examine, the SOA record was returned instead of the DS record, which indicates that the DS record has not yet been published in the parent zone (in this case, the <code style="background-color: #dcdcdc;font-size: 15px;color: #000000">.com</code> zone at the registrar) and hence, the chain of trust has not yet established.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">We see these query returns because the PowerShell command was run before updating the DS Records at Squarespace to show what to expect if the DS record isn't updated.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">Now that we know what to look for, I updated the DS Records at Squarespace.</span></span></span>
<img class="alignnone size-large wp-image-6098" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-10-1.png?w=656" alt="" width="656" height="275" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">And execute the same PowerShell command:</span></span></span>
<img class="alignnone size-large wp-image-6099" src="https://skdevops.wordpress.com/wp-content/uploads/2025/04/115-image-11.png?w=656" alt="" width="656" height="88" />
<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">This output shows that the DS records have been successfully published in the parent zone (.com), and the DNSSEC chain of trust is now established.</span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000">And that brings us to the end of this note. Enabling DNSSEC for Amazon Route 53 hosted zones allows cloud engineering teams to add an essential layer of security to the DNS infrastructure, protecting customers from DNS spoofing and cache poisoning attacks. If you have any questions or suggestions, please do not hesitate to use the comments section below. </span></span></span>

<span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #000000"><strong>Note:</strong> This note is part of a series on elastic load balancing. To learn more, please click on the links below.</span></span></span>
<a href="https://skundunotes.com/2022/07/30/add-an-application-load-balancer-to-aws-ec2-using-terraform/" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">Add an application load balancer to Amazon EC2 using Terraform</span></span></span></a>
<a href="https://skundunotes.com/2023/07/26/attach-an-application-load-balancer-to-amazon-ec2-instances-in-a-private-subnet/" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">Add an application load balancer to Amazon EC2 instances in a private subnet</span></span></span></a>
<a href="https://skundunotes.com/2023/09/12/create-amazon-ec2-auto-scaling-group-and-load-balancer-using-terraform-and-github-actions/" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">Create an Amazon EC2 Auto Scaling group and load balancer using Terraform and GitHub Actions</span></span></span></a>
<a href="https://skundunotes.com/2025/03/25/automate-amazon-route-53-hosted-zone-acm-and-load-balancer-provisioning-with-terraform-and-github-actions/" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">Automate Amazon Route 53 hosted zone, ACM, and Load Balancer provisioning with Terraform and GitHub Actions</span></span></span></a>
<a href="https://skundunotes.com/2025/04/06/attach-aws-waf-to-load-balancer-using-terraform-and-github-actions/" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">Attach AWS WAF to load balancer using Terraform and GitHub Actions</span></span></span></a>
<a href="//skundunotes.com/2025/04/09/enable-domain-name-system-dns-query-logging-for-amazon-route-53-hosted-zones-using-terraform/)" target="_blank" rel="noopener"><span style="font-size: 18px"><span style="font-family: calibri"><span style="color: #0000ff">Enable Domain Name System (DNS) query logging for Amazon Route 53 hosted zones using Terraform</span></span></span></a>
